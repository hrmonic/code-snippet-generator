{
  "id": "sql-query",
  "name": "Requêtes SQL Sécurisées",
  "description": "Requêtes SQL avec prepared statements",
  "language": "sql",
  "feature": "query",
  "code": "-- SELECT avec filtres\nSELECT {{columns}} FROM {{tableName}} WHERE id = ?;\n\n-- INSERT sécurisé\nINSERT INTO {{tableName}} ({{columns}}) VALUES (?, ?, ?);\n\n-- UPDATE sécurisé\nUPDATE {{tableName}} SET column1 = ?, column2 = ? WHERE id = ?;\n\n-- DELETE sécurisé\nDELETE FROM {{tableName}} WHERE id = ?;\n\n-- SELECT avec JOIN\nSELECT u.id, u.name, p.title\nFROM {{tableName}} u\nINNER JOIN posts p ON u.id = p.user_id\nWHERE u.active = 1;\n\n-- SELECT avec agrégation\nSELECT COUNT(*) as total, status\nFROM {{tableName}}\nGROUP BY status;\n\n-- Exemple d'utilisation avec PDO (PHP)\n-- $stmt = $pdo->prepare(\"SELECT * FROM {{tableName}} WHERE id = ?\");\n-- $stmt->execute([$id]);\n-- $result = $stmt->fetch();",
  "variables": [
    {
      "name": "tableName",
      "type": "text",
      "label": "Nom de la table",
      "required": true,
      "description": "Nom de la table en base de données",
      "placeholder": "users"
    },
    {
      "name": "operation",
      "type": "select",
      "label": "Type d'opération",
      "required": true,
      "description": "Type d'opération SQL à générer",
      "defaultValue": "SELECT",
      "options": [
        { "value": "SELECT", "label": "SELECT" },
        { "value": "INSERT", "label": "INSERT" },
        { "value": "UPDATE", "label": "UPDATE" },
        { "value": "DELETE", "label": "DELETE" },
        { "value": "all", "label": "Toutes les opérations" }
      ]
    },
    {
      "name": "columns",
      "type": "text",
      "label": "Colonnes",
      "required": false,
      "description": "Colonnes séparées par des virgules (laissez vide pour *)",
      "placeholder": "id,name,email",
      "defaultValue": "*"
    },
    {
      "name": "includeJoin",
      "type": "checkbox",
      "label": "Exemple avec JOIN",
      "required": false,
      "description": "Inclure un exemple avec JOIN",
      "defaultValue": false,
      "dependsOn": {
        "operation": ["SELECT", "all"]
      }
    },
    {
      "name": "includeAggregation",
      "type": "checkbox",
      "label": "Exemple avec agrégation",
      "required": false,
      "description": "Inclure un exemple avec COUNT, GROUP BY",
      "defaultValue": false,
      "dependsOn": {
        "operation": ["SELECT", "all"]
      }
    }
  ],
  "security": {
    "sqlInjection": true,
    "xss": false
  }
}

